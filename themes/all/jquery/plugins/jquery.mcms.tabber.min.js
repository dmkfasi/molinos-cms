
(function($){$.fn.tabber=function(options){var opts=$.extend({},$.fn.tabber.defaults,options);return this.each(function(){$$=$(this);var o=$.meta?$.extend({},opts,$$.data()):opts;if($$.find(' > '+o.selectors.tab).length==1)return;$$.addClass(o.classes.container).prepend('<ul class="'+o.classes.controls+'"></ul>').find(o.selectors.tab).each(function(j){$tab=$(this);var headerText=$tab.find(o.selectors.header).text();$tab.addClass(o.classes.tab).find(o.selectors.header).remove();$$.find('.'+o.classes.controls).append('<li><a href="'+window.location.href+'"><span>'+headerText+'</span></a></li>').find('li:last a').click(function(){$this=$(this);$container=$this.parents('ul:eq(0)').parent();var index=$container.find('.'+o.classes.controls+' li').index($this.parent().get(0));$container.find(o.selectors.tab).hide();$container.find(o.selectors.tab+':eq('+index+')').show();$this.parent().siblings().removeAttr('class').end().addClass('active');return false;});if(o.active!=j){$tab.hide();}else{$$.find('.'+o.classes.controls+' li:last').addClass('active');};});});};$.fn.tabber.defaults={active:0,selectors:{tab:'div.tab',header:'h5'},classes:{tab:'tabber-tab',controls:'tabber-controls',container:'tabber-container'}};})(jQuery);