/*
 * jQuery tabber plugin 0.4.0 (22.07.2008)
 * 
 * Lightweight plugin to create tabbed navigation
 * 
 * Copyright (c) 2008 Dmitriy Chekanov (d.chekanov@gmail.com)
 * 
 * Dual licensed under the MIT and GPL licenses:
 *   http://www.opensource.org/licenses/mit-license.php
 *   http://www.gnu.org/licenses/gpl.html
 */

(function($){$.extend({tabber:{defaults:{usehash:true,active:0,selectors:{tab:'div.tab',header:'h5'}},hashMonitorCallback:function(){var hashdata=$.url.hash.data.get('tabber');if(!hashdata){$('.tabber-container').each(function(){var index=$(this).find('.tabber-controls:eq(0) li').index($(this).find('.tabber-controls:eq(0) li.active-on-init'));$(this).find('.tabber-controls:eq(0) li.active-on-init').addClass('active').siblings().removeClass('active');$(this).find('.tabber-tab').hide();$(this).find('.tabber-tab:eq('+index+')').show();});}
else{$.each(hashdata,function(key,item){$('.tabber-container:eq('+key+')>.tabber-tab').hide();$('.tabber-container:eq('+key+')>.tabber-tab:eq('+item.t+')').show();$('.tabber-container:eq('+key+')>.tabber-controls li:eq('+item.t+')').addClass('active').siblings().removeClass('active');});};},processedContainers:0,hashdata:$.url.hash.data.get('tabber')||[]}});$.fn.tabber=function(options){var o=$.extend({},$.tabber.defaults,options);return this.each(function(){var $$=$(this);o=$.meta?$.extend({},opts,$$.data()):o;if($.tabber.defaults.usehash&&$.tabber.hashdata[$.tabber.processedContainers]){o.active=$.tabber.hashdata[$.tabber.processedContainers].t;};$$.addClass('tabber-container').prepend('<ul class="tabber-controls"></ul>');$controls=$$.find('.tabber-controls');$$.find(o.selectors.tab).each(function(j){var $tab=$(this),_processedContainers=$.tabber.processedContainers;var headerText=$tab.find(o.selectors.header).text();$tab.addClass('tabber-tab').find(o.selectors.header).remove();$controls.append('<li><a href="'+window.location.href+'"><span>'+headerText+'</span></a></li>').find('li:last a').click(function(e){if(o.usehash&&$.url.hash){$.tabber.hashdata=$.url.hash.data.get('tabber')||[];var hashParams={t:j};$.tabber.hashdata[_processedContainers]=hashParams;$.each($.tabber.hashdata,function(key,item){if(typeof item=='undefined')$.tabber.hashdata[key]={t:0};});$.url.hash.monitor.removeCallback('tabber')
$.url.hash.data.set('tabber',$.tabber.hashdata);$.url.hash.monitor.addCallback('tabber',$.tabber.hashMonitorCallback)};$this=$(this);$container=$this.parents('.tabber-container:eq(0)');var index=$container.find('.tabber-controls:eq(0) li').index($this.parent());$container.find('.tabber-tab').each(function(key){key==index?$(this).show():$(this).hide();});$this.parent().siblings().removeClass('active').end().addClass('active');e.preventDefault();});if(o.active!=j){$tab.hide();}else{$controls.find('li:last').addClass('active active-on-init');};});if(o.usehash&&!$.url.hash.monitor.callbacks['tabber'])$.url.hash.monitor.addCallback('tabber',$.tabber.hashMonitorCallback);$.tabber.processedContainers++;});};})(jQuery);